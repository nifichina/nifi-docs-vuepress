(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{638:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"nifi-linux系统配置的最佳实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nifi-linux系统配置的最佳实践","aria-hidden":"true"}},[t._v("#")]),t._v(" NIFI Linux系统配置的最佳实践")]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("编辑人："),e("strong",[e("strong",[t._v("酷酷的诚")])]),t._v("  邮箱："),e("strong",[t._v("zhangchengk@foxmail.com")])]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("内容：")]),t._v(" "),e("p",[t._v("如果您在Linux上运行，请考虑以下最佳实践。典型的Linux缺省值并不一定能够很好地适应像NiFi这样的IO密集型应用程序的需要。")]),t._v(" "),e("p",[e("strong",[t._v("1、Maximum File Handles")])]),t._v(" "),e("p",[t._v("NiFi在任何时候都可能打开大量的文件句柄。通过编辑/etc/security/limits.conf来增加这些限制，添加如下内容：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("* hard nofile 50000\n\n* soft nofile 50000\n")])])]),e("p",[e("strong",[t._v("2、Maximum Forked Processes")])]),t._v(" "),e("p",[t._v("可以将NiFi配置为生成大量线程。要增加允许的数量，请编辑/etc/security/limits.conf")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("*  hard  nproc  10000\n*  soft  nproc  10000\n")])])]),e("p",[t._v("您的Linux发行版可能需要对/etc/security/limits.d/90-nproc.conf进行编辑")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("*  soft  nproc  10000\n")])])]),e("p",[e("strong",[t._v("3、Increase the number of TCP socket ports available")])]),t._v(" "),e("p",[t._v("如果您的流程将在短时间内设置和拆除大量套接字，那么这一点尤其重要。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('sudo sysctl -w net.ipv4.ip_local_port_range="10000 65000"\n')])])]),e("p",[e("strong",[t._v("4、Set how long sockets stay in a TIMED_WAIT state when closed")])]),t._v(" "),e("p",[t._v("您不希望您的套接字停留太久，因为您希望能够快速地设置和拆卸新的套接字。类似调整如下")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('sudo sysctl -w net.ipv4.netfilter.ip_conntrack_tcp_timeout_time_wait="1"\n')])])]),e("p",[e("strong",[t._v("5、Tell Linux you never want NiFi to swap")])]),t._v(" "),e("p",[t._v("Swapping 对某些应用很好，但不适用一直在运行的NIFI，编辑_/etc/sysctl.conf告诉Linux禁用 Swapping_")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("vm.swappiness = 0\n")])])]),e("p",[t._v("对于处理各种NiFi repos的分区，请关闭诸如atime之类的选项。这样做会导致吞吐量的惊人提高。编辑/etc/fstab文件，对于感兴趣的分区，添加noatime选项。")])])}],!1,null,null,null);s.default=n.exports}}]);